# This test-runner.js is deprecated...

## TL;DR

This deprecation is related to a change to the `ember electron:test` support
scripts to make them less brittle. TL;DR is you should rerun the blueprint to
regenerate `ember-electron/test-main.js` and `testem-electron.js`. If you have
made any custom changes to `ember-electron/test-main.js`, or if you just want to
know more about that change, keep reading...

## Details

`ember-electron/test-main.js` is generated by `ember-electron`'s blueprint, and
previously contained all of the test-mode main process code. `test-runner.js`
lives in the `ember-electron` and is run via `testem-electron.js`. It has to
pass a very specific set of command-line options when launching Electron that
`test-main.js` parses to be able to set up communication with `testem`.

These two scripts are pretty tightly coupled together, but previously one lived
in `ember-electron` and one was generated in the consuming app via the
blueprint. So anytime we want to make an update affecting how those scripts
communicate, it would require apps to rerun the blueprint after updating
`ember-electron`, which is not a smooth upgrade experience.

So we moved all the code that was in `ember-electron/test-main.js` into
`ember-electron` and modified the `ember-electron/test-main.js` in the blueprint
to do nothing but `require()` the script out of `ember-electron`. That puts all
of the tightly-coupled code in the `ember-electron` addon and frees us up to
make updates without requiring apps to rerun the blueprint.

If you need to change the contents of `test-main.js` for some reason, there are
two options. Ideally you could just put your code in `test-main.js` before or
after the `require()` statement. If you need to modify some of the code that now
lives in the `require()`'d script in `ember-electron`, you'll need to copy the
code out of it back into your `ember-electron/test-main.js`, replacing the
`require()` statement, and then monitoring releases of `ember-electron` for
changes to `test-main.js`. We realize this is cumbersome, but we hope nobody
really has to do it, so if you find yourself doing so, please find is in the
\#electron channel in Ember Community Slack and tell us about your use case.
